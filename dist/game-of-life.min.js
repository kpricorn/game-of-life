/*! game-of-life 13-09-2013 */
(function(){var a,b,c,d,e=function(a,b){return function(){return a.apply(b,arguments)}};b=_.flatten(function(){var a,b;for(b=[],c=a=-1;1>=a;c=++a)b.push(function(){var a,b;for(b=[],d=a=-1;1>=a;d=++a)b.push([c,d]);return b}());return b}(),!0),a=function(){function a(a){this.field=null!=a?a:{},this.turn=e(this.turn,this),this.livingNeighbours=e(this.livingNeighbours,this),this.play=e(this.play,this),this.neighboursCoords=e(this.neighboursCoords,this),this.candidates=e(this.candidates,this)}return a.prototype.cells=function(){var a=this;return Object.keys(this.field).map(function(b){return a.field[b]})},a.prototype.candidates=function(){var a,b;return _.flatten(function(){var c,d,e,f,g;for(e=this.cells(),g=[],c=0,d=e.length;d>c;c++)f=e[c],a=f[0],b=f[1],g.push(this.neighboursCoords(a,b));return g}.call(this),!0)},a.prototype.neighboursCoords=function(a,c){var d,e,f,g,h,i;for(i=[],f=0,g=b.length;g>f;f++)h=b[f],d=h[0],e=h[1],i.push([a+d,c+e]);return i},a.prototype.allDead=function(){return 0===Object.keys(this.field).length},a.prototype.play=function(){var a;for(a=[];!this.allDead();)a.push(this.turn());return a},a.prototype.livingNeighbours=function(a,b){var c=this;return _.select(this.neighboursCoords(a,b),function(a){var b,d;return b=a[0],d=a[1],null!=c.field[""+b+"/"+d]})},a.prototype.isAlive=function(a,b){var c;return 3<=(c=this.livingNeighbours(a,b).length)&&4>=c},a.prototype.turn=function(){var a=this;return this.field=_.object(_.select(this.candidates(),function(b){var c,d;return c=b[0],d=b[1],a.isAlive(c,d)}).map(function(a){var b,c;return b=a[0],c=a[1],[""+b+"/"+c,[b,c]]}))},a}()}).call(this);